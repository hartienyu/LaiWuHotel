<view class="page-container">
  <view class="tab-bar">
    <t-tabs
      t-class="tab-bar__inner"
      t-class-active="tab-bar__active"
      t-class-track="t-tabs-track"
      bind:change="onTabChange"
      value="{{curTab}}"
      sticky="{{true}}"
    >
      <t-tab-panel
        wx:for="{{tabs}}"
        wx:for-index="index"
        wx:for-item="item"
        wx:key="index"
        label="{{item.text}}"
        value="{{item.key}}"
      />
    </t-tabs>
  </view>

  <t-pull-down-refresh
    value="{{pullDownRefreshing}}"
    bind:refresh="onPullDownRefresh"
    background="#f5f5f5"
    using-custom-navbar="{{true}}"
  >
    <view class="order-list-wrap">
      <block wx:for="{{bookingList}}" wx:key="id" wx:for-item="item">
        <view class="booking-card" bindtap="onOrderCardTap" data-order="{{item}}">
          
          <view class="card-header">
            <text class="create-time">预订时间：{{item.createTimeStr}}</text>
            <text class="status-tag status-{{item.status}}">{{item.statusDesc}}</text>
          </view>
          
          <view class="divider"></view>

          <view class="card-body">
            <image class="room-img" src="{{item.thumb}}" mode="aspectFill" />
            
            <view class="room-info">
              <view class="hotel-name">{{item.hotelName}}</view>
              <view class="room-name">{{item.roomName}}</view>
              <view class="date-range">
                <text>入住: {{item.checkInDate}}</text>
                <text class="date-separator">|</text>
                <text>离店: {{item.checkOutDate}}</text>
              </view>
            </view>
          </view>

          <view class="card-footer">
            <view class="order-no">订单号: {{item.orderNo}}</view>
            <view class="price-wrap">
              <text class="currency">¥</text>
              <text class="price">{{item.amount / 100}}</text>
            </view>
          </view>

        </view>
      </block>
    </view>

    <view wx:if="{{listLoading === 1}}" class="loading-center">
      <t-loading theme="circular" size="40rpx" text="加载中..." />
    </view>

    <t-empty
      wx:elif="{{listLoading === 2}}"
      image="{{emptyImg}}"
      description="暂无相关订单"
    />

    <t-empty
      wx:elif="{{listLoading === 3}}"
      image="{{emptyImg}}"
      description="加载失败"
    >
      <t-button slot="action" theme="primary" bindtap="onReTryLoad">重试</t-button>
    </t-empty>

    <view class="bottom-spacer"></view>
  </t-pull-down-refresh>
</view>